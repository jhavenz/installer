# Advanced difficulty
kickstart-template: phone-book

models:
  Person:
    name: string
    email: string index
    team_id: unsignedBigInteger nullable foreign:teams
    user_id: unsignedBigInteger nullable foreign:users
    timestamps: true
    relationships:
      belongsTo: User, Team
      morphOne: Address
      morphToMany: Phone

  Business:
    name: string index
    industry: string
    team_id: unsignedBigInteger nullable foreign:teams
    timestamps: true
    relationships:
      belongsTo: Team
      morphOne: Address
      morphToMany: Phone

  Phone:
    number: string
    type: string
    timestamps: true
    indexes:
      - unique: number, type
    relationships:
      morphedByMany: Person, Business

  Address:
    street: string index
    city: string
    state: string
    zip: string index
    timestamps: true
    indexes:
      - unique: addressable_id, addressable_type
    relationships:
      morphTo: addressable

controllers:
  Person:
    resource: api
    index:
      resource: 'paginate:people'
  Business:
    resource: api
    index:
      resource: 'paginate:businesses'
  Phone:
    resource: api
    index:
      resource: 'paginate:phones'
  Address:
    resource: api
    index:
      resource: 'paginate:addresses'

seeders: Person, Business, Phone, Address
